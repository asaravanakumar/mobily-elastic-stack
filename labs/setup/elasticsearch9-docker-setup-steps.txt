

#STEP 1: Pull the Elasticsearch image
docker pull docker.elastic.co/elasticsearch/elasticsearch:9.1.0

#STEP 2: Create a new docker network for Elasticsearch and Kibana
docker network create elastic

#STEP 3: Start Elasticsearch in Docker
docker run -d --name es01 --net elastic -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" -t docker.elastic.co/elasticsearch/elasticsearch:9.1.0


#STEP 4: A password is generated for the elastic user and output to the terminal, plus an enrollment token for enrolling Kibana
#Copy the generated password and enrollment token and save them in a secure location. These values are shown only when you start Elasticsearch for the first time.

#STEP 5: Reset Elasticsearch password [Optional]
docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-reset-password

#STEP 6: Access below URL from browser with generated Elasticsearch credentials
https://localhost:9200

#You'll get JSON response with Elasticsearch cluster details

#STEP 7: Copy the http_ca.crt security certificate from your Docker container to your local machine
docker cp es01:/usr/share/elasticsearch/config/certs/http_ca.crt .


#STEP 8a: Open a new terminal and verify that you can connect to your Elasticsearch cluster by making an authenticated call, using the http_ca.crt file that you copied from your Docker container. 
curl --cacert http_ca.crt -u elastic https://localhost:9200

#If any error comes related to certificate legitimacy either add the certificate to the trusted store or disable SSL verification
curl -k -u elastic https://localhost:9200

#Enter the password for the elastic user when prompted.
#You'll get JSON response with Elasticsearch cluster details

#STEP 8b: Set the password as environment variable to avoid entering every time while making request
# For windows machines
SET ELASTIC_PASSWORD=<generated_password>
curl -k -u elastic:%ELASTIC_PASSWORD% https://localhost:9200

# For Linux/Mac machines
EXPORT ELASTIC_PASSWORD=<generated_password>
curl -k -u elastic:$ELASTIC_PASSWORD https://localhost:9200


#Enter the password for the elastic user when prompted.
#You'll get JSON response with Elasticsearch cluster details
